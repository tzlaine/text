<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Case Mapping</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.Text (Proposed)">
<link rel="up" href="../the_unicode_layer.html" title="The Unicode Layer">
<link rel="prev" href="text_segmentation.html" title="Text Segmentation">
<link rel="next" href="collation.html" title="Collation">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="text_segmentation.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_unicode_layer.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="collation.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_text__proposed_.the_unicode_layer.case_mapping"></a><a class="link" href="case_mapping.html" title="Case Mapping">Case
      Mapping</a>
</h3></div></div></div>
<p>
        Case mapping is conceptually simple. There are three kinds of case: lower-case,
        upper-case, and title-case. Title-case has an upper-case letter at the beginning
        of each word. There are six operations, though there are a few overloads
        of each. There are three case-mapping algorithms: <code class="computeroutput"><a class="link" href="../../boost/text/v1/to_lower_idm16555.html" title="Function template to_lower">to_lower()</a></code>,
        <code class="computeroutput"><a class="link" href="../../boost/text/v1/to_title_idm16664.html" title="Function template to_title">to_title()</a></code>, and <code class="computeroutput"><a class="link" href="../../boost/text/v1/to_upper_idm16773.html" title="Function template to_upper">to_upper()</a></code>.
        Each of these outputs its result (as code points) via an out-iterator. There
        are also three case predicates, <code class="computeroutput"><a class="link" href="../../boost/text/v1/is_lower_idm16521.html" title="Function template is_lower">is_lower()</a></code>,
        <code class="computeroutput"><a class="link" href="../../boost/text/v1/is_title_idm16615.html" title="Function template is_title">is_title()</a></code>, and <code class="computeroutput"><a class="link" href="../../boost/text/v1/is_upper_idm16739.html" title="Function template is_upper">is_upper()</a></code>.
      </p>
<p>
        For each of these, there are overloads that take the input code point sequence
        as a <a class="link" href="../concepts.html#boost_text__proposed_.concepts.cprange">CPRange</a>,
        a pair of <a class="link" href="../concepts.html#boost_text__proposed_.concepts.cpiter">CPIters</a>,
        or a <a class="link" href="../concepts.html#boost_text__proposed_.concepts.graphemerange">GraphemeRange</a>:
      </p>
<p>
</p>
<pre class="programlisting"><span class="identifier">std</span><span class="special">::</span><span class="identifier">array</span><span class="special">&lt;</span><span class="identifier">uint32_t</span><span class="special">,</span> <span class="number">4</span><span class="special">&gt;</span> <span class="identifier">cps</span> <span class="special">=</span> <span class="special">{{</span><span class="char">'A'</span><span class="special">,</span> <span class="char">'n'</span><span class="special">,</span> <span class="char">'d'</span><span class="special">}};</span>

<span class="identifier">assert</span><span class="special">(!</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">is_lower</span><span class="special">(</span><span class="identifier">cps</span><span class="special">));</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">is_title</span><span class="special">(</span><span class="identifier">cps</span><span class="special">));</span>
<span class="identifier">assert</span><span class="special">(!</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">is_upper</span><span class="special">(</span><span class="identifier">cps</span><span class="special">));</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">array</span><span class="special">&lt;</span><span class="identifier">uint32_t</span><span class="special">,</span> <span class="number">4</span><span class="special">&gt;</span> <span class="identifier">lowered_cps</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">to_lower</span><span class="special">(</span><span class="identifier">cps</span><span class="special">,</span> <span class="identifier">lowered_cps</span><span class="special">.</span><span class="identifier">begin</span><span class="special">());</span>
</pre>
<p>
      </p>
<p>
        As a complication, some languages have case-mapping rules that differ from
        the general case, and so there is an optional <code class="computeroutput"><a class="link" href="../../boost/text/v1/case_language.html" title="Type case_language">case_language</a></code> parameter to the
        <code class="computeroutput"><span class="identifier">to_</span><span class="special">*()</span></code>
        functions that you can specify to get this custom behavior:
      </p>
<p>
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span> <span class="identifier">t</span> <span class="special">=</span> <span class="string">"ijssel"</span><span class="special">;</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span> <span class="identifier">default_titled_t</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">to_title</span><span class="special">(</span>
    <span class="identifier">t</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">inserter</span><span class="special">(</span><span class="identifier">default_titled_t</span><span class="special">,</span> <span class="identifier">default_titled_t</span><span class="special">.</span><span class="identifier">end</span><span class="special">()));</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">default_titled_t</span> <span class="special">==</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span><span class="special">(</span><span class="string">"Ijssel"</span><span class="special">));</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">dutch_titled_t</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">to_title</span><span class="special">(</span>
    <span class="identifier">t</span><span class="special">,</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">utf_32_to_8_inserter</span><span class="special">(</span><span class="identifier">dutch_titled_t</span><span class="special">,</span> <span class="identifier">dutch_titled_t</span><span class="special">.</span><span class="identifier">end</span><span class="special">()),</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">case_language</span><span class="special">::</span><span class="identifier">dutch</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">dutch_titled_t</span> <span class="special">==</span> <span class="string">"IJssel"</span><span class="special">);</span>
</pre>
<p>
      </p>
<p>
        Another complication is that the title-case functions need to know where
        word boundaries are. By default, they use an instance of <code class="computeroutput"><a class="link" href="../../boost/text/v1/next_word_break_callable.html" title="Struct next_word_break_callable">next_word_break_callable</a></code>, which
        in turn just calls <code class="computeroutput"><a class="link" href="../../boost/text/v1/next_word_break_idm30187.html" title="Function template next_word_break">next_word_break()</a></code>.
        You can supply your own callable instead if you need tailored word breaking.
      </p>
<p>
        There are a few case mapping behaviors that are common in various languages,
        but that are not accounted for by the default Unicode case mapping rules.
        For instance, Dutch capitalizes <code class="computeroutput"><span class="string">"IJ"</span></code>
        at the beginning of title-cased words. This is available in Boost.Text's
        implementation if you use <code class="computeroutput"><a class="link" href="../../boost/text/v1/case_language.html" title="Type case_language">case_language</a><span class="special">::</span><span class="identifier">dutch</span></code>, as seen above. Boost.Text also implements
        the somewhat complicated rules for upper-casing modern Greek.
      </p>
<p>
        Finally, there are in-place versions of the case-mapping functions available
        for use with <code class="computeroutput"><a class="link" href="../../boost/text/v1/text.html" title="Struct text">text</a></code>
        and <code class="computeroutput"><a class="link" href="../../boost/text/v1/rope.html" title="Struct rope">rope</a></code>:
      </p>
<p>
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span> <span class="identifier">t</span> <span class="special">=</span> <span class="string">"a title"</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">in_place_to_upper</span><span class="special">(</span><span class="identifier">t</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">t</span> <span class="special">==</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span><span class="special">(</span><span class="string">"A TITLE"</span><span class="special">));</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">rope</span> <span class="identifier">r</span> <span class="special">=</span> <span class="string">"another title"</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">in_place_to_title</span><span class="special">(</span><span class="identifier">r</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">r</span> <span class="special">==</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">text</span><span class="special">::</span><span class="identifier">text</span><span class="special">(</span><span class="string">"Another Title"</span><span class="special">));</span>
</pre>
<p>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2018 T. Zachary Laine<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="text_segmentation.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_unicode_layer.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="collation.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
